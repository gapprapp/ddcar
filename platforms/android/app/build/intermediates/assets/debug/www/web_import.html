<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>นำสินค้าเข้าโกดัง</title>

  <!-- Bootstrap Import -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.6/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css" integrity="sha384-O8whS3fhG2OnA5Kas0Y9l3cfpmYjapjI0E4theH4iuMD+pLhbf6JI0jIMfYcK3yZ" crossorigin="anonymous">

  <!-- Super cool dialog-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.js"></script>

	<!-- Easy-autocomplete -->
	<script src="js/jquery.easy-autocomplete.js"></script>
	<link rel="stylesheet" href="css/easy-autocomplete.min.css">
	<link rel="stylesheet" href="css/easy-autocomplete.themes.min.css">
	
	<!-- Loading -->
	<link rel="stylesheet" href="css/easy-loading.css">
  <script src="js/easy-loading.js"></script>

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css?family=Prompt" rel="stylesheet">
  <!-- Main -->
  <link href="css/untitled.css" rel="stylesheet">
  <link rel="stylesheet" href="css/popup.css">

  <script>		
		var prod_id,img,cost_o;
		var flag = 1;
		$(document).ready(function () {
			get_header();

			var options = {
				url: function(phrase) {
					return "php/search_prod.php";
				},
				getValue: function(element) {
					//console.log(element);
					return element.prod_name;
				},
				ajaxSettings: {
					method: "POST",
					data: {}
				},
				preparePostData: function(data) {     
					prod_id = 0;     
					data.phrase = $("#name").val();
					return data;
				},
				minCharNumber: 3,
				list: {
						maxNumberOfElements: 1000,

						showAnimation: {
								type: "slide",
								time: 100
						},
						hideAnimation: {
								type: "slide",
								time: 100
						},

						onChooseEvent: function() {
							/*for(var b = 0; b < count; b++){
								if($("#name").val() == $("#name-"+b).val()){
									$.alert({
										icon: 'fa fa-warning',
										title: 'เตือน',
										content: "มีการเพิ่มสินค้า " + $("#name").val() + "กรุณาแก้ไขที่จำนวนของสินค้าที่ได้เพิ่มแล้ว",
									});
									$("#name").val("");
									$('#barcode').val("");
									$('#price').val("");
									$('#fund').val("");                 
									return 0;                
								}
							}*/							
							var barcode = $("#name").getSelectedItemData().prod_code;
							var price = $("#name").getSelectedItemData().prod_price;
							var price_s = $("#name").getSelectedItemData().prod_pricesend;
							cost_o = $("#name").getSelectedItemData().prod_cost;
							prod_id = $("#name").getSelectedItemData().prod_id;
							img = $("#name").getSelectedItemData().img;	

							if(cost_o == 0 && price == 0 && price_s == 0){
								$('#retail').val("");
								$('#fund').val("");						
								$('#whole').val("");	 
							}else{
								$('#retail').val(price);
								$('#fund').val(cost_o);						
								$('#whole').val(price_s);                
								flag = 1;
							}   						

							$("#name").attr('data-img',img);
							$('#name[rel=popover]').popover({
								html: true, 
								trigger: 'hover',
								placement: 'left',
								content: function(){
								return '<img src='+$(this).data('img')+'>';}
							}); 						
							$('#barcode').val(barcode);							
							$('#amount').val("1");						
							get_place();                   
						}
				},
				requestDelay: 300,
				theme: "blue-light",
				};
			$("#name").easyAutocomplete(options);	
		});		

		function get_header(){
			var d = new Date($.now());			
      var date = d.getDate() + "/" + (d.getMonth()+1) + "/" + d.getFullYear();
			$('#date').text(date);

			$.ajax({
				type: "GET",
				url:"php/get_ware.php",                            
				beforeSend: function(){
					EasyLoading.show({                           
						text: "กำลังโหลด"                            
					});
				},             
				success: function(data){  
					EasyLoading.hide();
					var obj = jQuery.parseJSON(data); 
					if(obj){
						$.each(obj, function(i, field){
							if(i == 0){
								ware_id = field.ware_id;
								$('#btn-b').text(field.ware_name);								
							}
							$('#b').append('<a class="dropdown-item text-center" href="#" onclick="setware('+field.ware_id+',\''+field.ware_name+'\')">'+field.ware_name+'</a>');
						}); 
					}
				}               
			}); 
		}

		arr_place = [];
		function get_place(){
			$.ajax({
				type: "POST",
				url:"php/get_place.php",    
				data:{'prod_id' : prod_id,"ware_id":ware_id},  			                                 
				success: function(data){				
					var obj = jQuery.parseJSON(data);                    
					if(obj){                        
							var txt = "";                                         
							$.each(obj, function(i, field){
									txt += field.place + " "; 
									arr_place.push(field.place.toLowerCase());                                                         
							});    
							$('#at').attr("placeholder",txt);                       
					}else{
							$('#at').attr("placeholder",""); 
					}                                                      
				}               
			});  
		}

		function show_avg(){
			var popup = document.getElementById("myPopup");
			popup.classList.toggle("show");
		}

		var ware_id;
		function setware(arg,arg2){
			ware_id = arg;
			$('#btn-b').text(arg2);
			get_place();
		}
	
		var check =  0;
		var is_show = 0;
		function cal_avg(type){
			if(flag == 1){
				if(type == "cost"){
						$.ajax({
								type: "POST",
								url:"php/get_amt_prod.php",           
								data: {prod:prod_id},								          
								success: function(data){									                                                        
										var cost_n = $('#fund').val();
										var amt_n = $('#amount').val();
										var amt_o = data;

										var avg = (parseInt(cost_n*amt_n) + parseInt(cost_o*amt_o))/(parseInt(amt_n)+parseInt(amt_o));    
										
										$('#avg-rate').text(Math.round(avg));
										if(is_show == 0){
												show_avg(); 
												is_show = 1;
										}                       
										check = 1;                              
								}               
						});            
				}else if(type == "amt" && check == 1){
						$.ajax({
								type: "POST",
								url:"php/get_amt_prod.php",           
								data: {prod:prod_id}, 
								success: function(data){          
										var cost_n = $('#fund').val();
										var amt_n = $('#amount').val();
										var amt_o = data;

										var avg = (parseInt(cost_n*amt_n) + parseInt(cost_o*amt_o))/(parseInt(amt_n)+parseInt(amt_o));    
										
										$('#avg-rate').text(Math.round(avg)); 
										if(is_show == 0){
												show_avg(); 
												is_show = 1;
										}                                                         
								}               
						});            
				}
			
			}           
		}  
		
		function add(){
			var code = $('#barcode').val();
			var cost = $('#fund').val();
			var price_s = $('#whole').val();
			var price_w = $('#retail').val(); 
			var name = $('#name').val(); 
			var amt = $('#amount').val(); 
			if(!$('#at').prop('placeholder') && $('#at').val() == ""){ 
					$.confirm({
						title: 'พบข้อผิดพลาด',
						content: 'กรุณากรอกข้อมูลให้ครบ',
						backgroundDismiss: true,
						buttons: {
							formSubmit: {
								text: 'ตกลง',
								btnClass: 'btn-regis',
								action: function () {
								}
							}
						}
					});                
					return 0;
			}            
			if(name != "" && amt != "" && code != "" && cost != "" && price_s != "" && price_w != "" && jQuery.inArray($('#at').val().toLowerCase(),arr_place) == -1 && prod_id != 0){      
					if(flag == 0){                 
							$.ajax({
									type: "POST",
									url:"php/update_prod.php",           
									data: {prod:prod_id , cost:cost , price_s:price_s , price_w:price_w},									          
									success: function(data){
											if(data == "success"){
													show();
											}else{
											$.confirm({
													title: 'พบข้อผิดพลาด',
													content: 'ลองอีกครั้ง',
													backgroundDismiss: true,
													buttons: {
															formSubmit: {
															text: 'ตกลง',
															btnClass: 'btn-regis',
															action: function () {
															}
															}
													}
											});
											}
									}               
							});                   
					}else if(flag == 1 && check == 1){
							$.ajax({
									type: "POST",
									url:"php/update_prod.php",           
									data: {prod:prod_id , cost:cost , price_s:price_s , price_w:price_w},					            
									success: function(data){ 
											if(data == "success"){
													flag = 0;
													check = 0;
													show();
											}else{
											$.confirm({
													title: 'พบข้อผิดพลาด',
													content: 'ลองอีกครั้ง',
													backgroundDismiss: true,
													buttons: {
															formSubmit: {
															text: 'ตกลง',
															btnClass: 'btn-regis',
															action: function () {
															}
															}
													}
											});
											}
									}               
							});                                      
					}else{
							flag = 0;
							show();
					}               
			}else{
					$.confirm({
						title: 'พบข้อผิดพลาด',
						content: 'กรุณากรอกข้อมูลให้ครบ',
						backgroundDismiss: true,
						buttons: {
							formSubmit: {
								text: 'ตกลง',
								btnClass: 'btn-regis',
								action: function () {
								}
							}
						}
					});
			}          
		}     

		arr_data = []
		var count = 0;
  	function show(){
  		var bottom = $(window).height() - $("#cnt-add").offset().top - $("#cnt-add").height();
  		// Always scroll to the bottom
  		if(bottom < 200){
  		  $("#cnt-add").css('max-height', $("#cnt-add").height());
  		  $("#cnt-add").animate({scrollTop: $('#cnt-add').prop('scrollHeight')});
  		}   

<<<<<<< HEAD
  		$("#cnt-add").append('<div class="row mgb-5">'+
  		  '<div class="col-1"></div>'+
=======
  		$("#cnt-add").append('<div id="add-'+count+'" class="row mgb-5">'+
>>>>>>> 28f20414f32d0bf2ea6feef0c534703836242ff0
          '<div class="col-2">'+
            '<div class="input-group-prepend">'+
              '<span id="span-no" class="input-group-text">'+(count+1)+'</span>'+
              '<input id="barcodee" type="text" value="'+$('#barcode').val()+'" class="form-control text-center" readonly>'+
            '</div>'+
          '</div>'+
          '<div class="col-1 nopd-8">'+
            '<input id="att" type="text" value="'+$('#at').val()+'" placeholder="'+$('#at').attr('placeholder')+'" class="form-control text-center" readonly>'+
          '</div>'+
          '<div class="col-3 nopd-8">'+
            '<input id="name-'+count+'" value="'+$('#name').val()+'" class="form-control text-center" rel="popover" data-img="'+img+'" readonly>'+
          '</div>'+
          '<div class="col-1 nopd-8">'+
            '<input id="amount-'+count+'" value="'+$('#amount').val()+'" type="number" class="form-control text-center" min="1" readonly>'+
          '</div>'+
          '<div class="col-1 nopd-8">'+
            '<input id="fundd" type="number" value="'+$('#fund').val()+'" class="form-control text-center no-spin" min="0" readonly>'+
          '</div>'+          
          '<div class="col-1 nopd-8">'+
<<<<<<< HEAD
            '<input id="whole" type="number" class="form-control text-center no-spin" min="0">'+
          '</div>'+
          '<div class="col-1 nopd-8">'+
            '<input id="retail" type="number" class="form-control text-center no-spin" min="0">'+
=======
            '<input id="wholee" type="number" value="'+$('#whole').val()+'" class="form-control text-center no-spin" min="0" readonly>'+
          '</div>'+
          '<div class="col-1 nopd-8">'+
            '<input id="retaill" type="number" value="'+$('#retail').val()+'" class="form-control text-center no-spin" min="0" readonly>'+
>>>>>>> 28f20414f32d0bf2ea6feef0c534703836242ff0
          '</div>'+
          '<div class="col-1 nopd text-center">'+
          '<button id="btn-edit-'+count+'" class="btn btn-sm btn-primary mgr-5" onclick="edit('+count+');"> <i class="fas fa-pencil-alt"></i></button>'+
          '<button id="btn-save-'+count+'" class="btn btn-sm btn-success mgr-5" onclick="save('+count+');" hidden> <i class="fa fa-check"></i></button>'+
          '<button id="btn-trash-'+count+'" class="btn btn-sm btn-danger" onclick="remove('+count+');"> <i class="fa fa-trash"></i></button>'+
					'</div>'+
					"<script>" +
						"$('#name-"+count+"[rel=popover]').popover({" +
						"html: true," +
						"trigger: 'hover'," +
						"placement: 'left'," +
						"content: function(){" +
						"return '<img src='+$(this).data('img')+'>';}" +
						"});" +
					"</" + "script>" +
				'</div>');
				
				item = {}            
				item ["qr"] =  $('#barcode').val();
				item ["prod_id"] =  prod_id;
				item ["name"] =  $('#name').val();
				item ["cost"] =  $('#fund').val();               
				item ["amt"] =  $('#amount').val();			
				item ["addr"] = $('#at').val();    

				arr_data.push(item);		
				$("#btn-b").attr('disabled',true);

				$('#at').attr("placeholder","");
				$('#barcode').val("");
				$('#name').val("");
				$("#name").attr('data-img',"");
				$('#name[rel=popover]').popover({
					html: true, 
					trigger: 'hover',
					placement: 'left',
					content: function(){
					return '<img src='+$(this).data('img')+'>';}
				}); 		
				$('#fund').val("");
				$('#whole').val("");
				$('#retail').val("");
				$('#amount').val("1");
				$('#at').val("")
				if(is_show == 1){
						show_avg(); 
						is_show = 0;
				}            
				$('#avg-rate').text("");
		}
		
		function set_default(){
			$('#at').attr("placeholder","");
			$('#barcode').val("");
			$('#name').val("");
			$("#name").attr('data-img',"");
			$('#name[rel=popover]').popover({
				html: true, 
				trigger: 'hover',
				placement: 'left',
				content: function(){
				return '<img src='+$(this).data('img')+'>';}
			}); 		
			$('#fund').val("");
			$('#whole').val("");
			$('#retail').val("");
			$('#amount').val("1");
			$('#at').val("")
		}

  	function edit(){
  		$("#btn-edit").prop('hidden', true);
  		$("#btn-trash").prop('hidden', true);
  		$("#btn-save").prop('hidden', false);
  	}

  	function save(){
  		$("#btn-edit").prop('hidden', false);
  		$("#btn-trash").prop('hidden', false);
  		$("#btn-save").prop('hidden', true);
  	}
  </script>

  <style>
  	label{
  		color: #666;
  		margin-right: 15px; margin-top: 5px;
  	}
  	#from{
  		width: 50%; background-color: #666; border-color: #666; color: white;
  	}
  	#from:focus{
  		outline: 0;
  	}
  	a{
  		color: #999;
  	}
  	a:hover{
  		color: #666;
  	}
	.active{
		color: #666;
	}
  </style>
</head>
<body>
	<div class="container-fullwidth justify-content-center">
		<nav class="navbar navbar-expand-md navbar-dark">
        	<div class="collapse navbar-collapse justify-content-md-center" id="navbarCollapse">
          	<h3 id="nav-title">นำสินค้าเข้าโกดัง</h3>
        	</div>
      	</nav>
      	<div class="container">
      		<div class="row" style="margin-top: 2px;">
      			<div class="col-12 text-center">
      				<a href="web_sale.html" class="mgr-20">ขายสินค้า</a>
      				<a href="web_import.html" class="mgr-20 active">นำสินค้าเข้าโกดัง</a>
      				<a href="" class="mgr-20">เช็คสต๊อก</a>
      				<a href="" class="mgr-20">รายการย้อนหลัง</a>
      			</div>
      		</div>
      	</div><br><br>

      	<div class="container-fullwidth">
      		<div id="head" class="row mgb-5" style="padding-left: 5%; padding-right: 5%;">
      		  <div class="col-3"></div>
      		  <div class="col-2 text-center" style="color: #666;">เลือกโกดัง</div>
      		  <div class="col-2 text-center" style="color: #666;">วันที่</div>
      		  <div class="col-2 text-center" style="color: #666;">ผู้ทำรายการ</div>
      		  <div class="col-3"></div>
      		</div>
      	</div>

      	<div class="container-fullwidth">
      		<div class="row" style="padding-left: 5%; padding-right: 5%;">
      			<div class="col-3"></div>
      			<div class="col-2 text-center">
      				<div id="select-ware" class="dropdown">
      				  <button id="btn-b" class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="background-color: #666; width: 103.33px;">
      				  </button>
      				  <div id="b" class="dropdown-menu" aria-labelledby="dropdownMenuButton" style="min-width: 0px !important; width: 103.33px;">      				    
      				    
      				  </div>
      				</div>
      			</div>
      			<div id="date" class="col-2 text-center" style="margin-top: 5px; color: #666;">12/5/2018</div>
      			<div class="col-2 text-center nopd" style="margin-top: 5px; color: #666;">ชายเมืองสิงค์</div>
      			<div class="col-3"></div>
      		</div>
      	</div><hr style="width: 85%;">
      	
      	<div class="container-fullwidth nopd">
      		<div id="head" class="row mgb-5">
      		  <div class="col-1"></div>
      		  <div class="col-2 text-center nopd">บาร์โค้ด</div>
      		  <div class="col-1 text-center nopd-8">ที่อยู่สินค้า</div>
      		  <div class="col-3 text-center nopd">ชื่อสินค้า</div>
      		  <div class="col-1 text-center nopd-8">จำนวน</div>
      		  <div class="col-1 text-center nopd-8">ทุน</div>
      		  <div class="col-1 text-center nopd-8">ราคาส่ง</div>
      		  <div class="col-1 text-center nopd-8">ราคาปลีก</div>
      		</div>
      	</div>
	
		<div id="cnt-add" class="container-fullwidth nopd" style="overflow-y: auto; overflow-x: hidden;">
			<!-- Append Here!! -->
		</div>

		<div class="container-fullwidth nopd">
			<!-- Input -->
			<div class="row" >
			  <div class="col-1"></div>
			  <div class="col-2">
			    <div class='input-group-prepend'>
			      <span id="span-no" class='input-group-text'>#</span>
			      <input id='barcode' type='text' class='form-control text-center' readonly>
			    </div>
			  </div>
			  <div class='col-1 nopd-8'>
			    <input id='at' type='text' class='form-control text-center'>
			  </div>
			  <div class='col-3 nopd-8'>
			    <input id="name" class="form-control text-center" rel="popover" data-img=""></input>
			  </div>
			  <div class='col-1 nopd-8'>
			    <input id='amount' type='number' onchange="cal_avg('amt')" class='form-control text-center no-spin' min='1' value="1">
			  </div>
			  <div class='col-1 nopd-8 popup'>
			  	<span class="popuptext" id="myPopup">เฉลี่ย : <span id="avg-rate"></span></span>
			    <input id='fund' type='number'  onchange="cal_avg('cost')" class='form-control text-center no-spin' min='0'>
			  </div>
			  <div class='col-1 nopd-8'>
			    <input id='whole' type='number' class='form-control text-center no-spin' min='0'>
			  </div>
			  <div class='col-1 nopd-8'>
			    <input id='retail' type='number' class='form-control text-center no-spin' min='0'>
			  </div>
			  <div class="col-1 nopd text-center">
			  	<button class="btn btn-sm btn-primary" disabled> <i class="fas fa-pencil-alt"></i></button>
			  	<button class="btn btn-sm btn-danger" disabled> <i class="fa fa-trash"></i></button>
			  	<button class="btn btn-sm btn-success" hidden disabled> <i class="fa fa-check"></i></button>
			  </div>
			</div><br>
			<div class="row">
				<div class="col-11 text-right nopd-8">
					<button class="btn btn-md btn-success" style="margin-right: 5px;" onclick="add();">เพิ่มสินค้า</button>
					<button class="btn btn-md btn-danger" onclick="set_default()">ค่าเริ่มต้น</button>
				</div>
				<div class="col-1"></div>
			</div>
		</div>

		<div id="ctn-bttm" class="container-fullwidth fixed-bottom" style="margin-bottom: 15px; z-index: 0;">
		  <div class="row">
		    <div class="col-12 text-center">
		        <button id="btn_checkbill" class="btn btn-success" onclick="">บันทึก</button>
		    </div>
		</div>
	</div>

	<!-- The Modal -->
	<div class="modal fade" id="myModal" tabindex='-1'>
	  <div class="modal-dialog modal-md modal-dialog-centered">
	    <div class="modal-content">
	      <!-- Modal Header -->
	      <div class="col-12 text-center" style="margin-top: 15px;">
	        <h4 class="modal-title">คิดเงิน</h4>
	        <hr style="width: 70%;">
	      </div>

	      <!-- Modal body -->
	      <div class="modal-body">
	        <div class="container">
	          <div class="row">
	            <div class="col-2"></div>
	            <div class="col-3 text-center" style="border: solid #767676; padding-top: 5px;">
	              <h3>รวม : </h3>
	            </div>
	            <div class="col-5 text-center" style="border: solid #767676; background: #767676;">
	              <input id="net-price" type="number" class="form-control form-control-lg text-center no-spin no-border check-bill-input" style="background: #767676; color: #5dbe5d;"
	                readonly>
	            </div>
	            <div class="col-2"></div>
	          </div><br>

	          <div class="row">
	            <div class="col-2"></div>
	            <div class="col-3 text-center" style="border: solid #767676; padding-top: 5px;"><h3>ลด : </h3></div>
	            <div class="col-5 text-center" style="border: solid #767676; background: #767676;">
	              <input id="discount-money" onchange="chng_discount()"  data-index="5" type="number" class="form-control form-control-lg text-center no-spin no-border check-bill-input" style="background: #767676; color: #fd8b5e;">
	            </div>
	            <div class="col-2"></div>
	          </div> <br>

	          <div class="row">
	            <div class="col-2"></div>
	            <div class="col-3 text-center" style="border: solid #767676; padding-top: 5px;"><h3>สุทธิ : </h3></div>
	            <div class="col-5 text-center" style="border: solid #767676; background: #767676;">
	              <input id="final-price" type="number" class="form-control form-control-lg text-center no-spin no-border check-bill-input" style="background: #767676; color: #ffffff;"
	              readonly>
	            </div>
	            <div class="col-2"></div>
	          </div>
	          <br>

	          <div class="row">
	            <div class="col-2"></div>
	            <div class="col-3 text-center" style="border: solid #767676; padding-top: 5px;"><h3>รับ : </h3></div>
	            <div class="col-5 text-center" style="border: solid #767676; background: #767676;">
	              <input id="get-money" type="number" data-index="6" class="form-control form-control-lg text-center no-spin no-border check-bill-input" style=" background: #767676;  color: #DBBD5B;">
	            </div>
	            <div class="col-2"></div>
	          </div> <br>

	          <div class="row">
	            <div class="col-2"></div>
	            <div class="col-3 text-center" style="border: solid #767676; padding-top: 5px;"><h3>ทอน : </h3></div>
	            <div class="col-5 text-center" style="border: solid #767676; background: #767676;">
	              <input id="change-money" type="number" class="form-control form-control-lg text-center no-spin no-border check-bill-input" style="background: #767676; color: #A5FAE9"
	              readonly>
	            </div>
	            <div class="col-2"></div>
	          </div> <br>
	      </div> <br>

	      <!-- Modal footer -->
	      <div class="col-12 text-center">
	        <button id="btn_save" type="button" class="btn btn-success" data-dismiss="modal" onclick="save()" style="margin-right: 15px;">บันทึก</button>
	        <button type="button" class="btn btn-secondary" data-dismiss="modal">ปิด</button>
	      </div><br>
	    </div>
	  </div>
	</div>
	</div>

	<!-- Print Modal -->
	<div class="modal fade" id="printModal" tabindex='-1'>
	  <div class="modal-dialog modal-md modal-dialog-centered">
	    <div class="modal-content">
	      <!-- Modal Header -->
	      <div class="col-12 text-center" style="margin-top: 15px;">
	        <h4 class="modal-title">ตั้งค่าการพิมพ์</h4>
	        <hr style="width: 70%;">
	      </div>

	      <!-- Modal body -->
	      <div class="modal-body">
	        <div class="col-12 text-center">
	          <label class="radio-inline" style="font-size: 120%;">
	            <input type="radio" name="print-radio" value="print" checked>พิมพ์</label>
	          <label class="radio-inline" style="font-size: 120%;">
	            <input type="radio" name="print-radio" value="no">ไม่พิมพ์</label>
	        </div>
	        <div id="print-option-title" class="col-12 text-center">
	          <h5 style="text-decoration: underline;">ตัวเลือก</h5>
	        </div>
	        <div id="print-option" class="col-12 text-center">
	          <label class="radio-inline" style="font-size: 120%;">
	            <input id="bill" type="radio" name="print-option" value="bill" checked>ใบเสร็จ</label>
	          <label class="radio-inline" style="font-size: 120%;">
	            <input id="a4" type="radio" name="print-option" value="a4">ใบรายการขาย(A4)</label>
	        </div><br>
	        <!-- Modal footer -->
	        <div class="col-12 text-center">
	          <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="set_print_title();">บันทึก</button>
	        </div>
	        <br>
	      </div>
	    </div>
	  </div>
	</div>

	<!-- Pay Modal -->
	<div class="modal fade" id="payModal" tabindex='-1'>
	  <div class="modal-dialog modal-md modal-dialog-centered">
	    <div class="modal-content">
	      <!-- Modal Header -->
	      <div class="col-12 text-center" style="margin-top: 15px;">
	        <h4 class="modal-title">เงื่อนไขการชำระเงิน</h4>
	        <hr style="width: 70%;">
	      </div>

	      <!-- Pay body -->
	      <div class="modal-body">
	        <div class="col-12 text-center">
	          <label class="radio-inline">
	            <input type="radio" name="pay-radio" value="เงินสด" checked>เงินสด</label>
	          <label class="radio-inline">
	            <input type="radio" name="pay-radio" value="เงินโอน">เงินโอน</label>
	          <label class="radio-inline">
	            <input type="radio" name="pay-radio" value="ลูกหนี้">ลูกหนี้</label>
	        </div>
	        <div class="col-12">
	          <div class="form-group">
	            <label for="comment">หมายเหตุ:</label>
	            <textarea class="form-control" rows="5" id="comment" disabled></textarea>
	          </div>
	        </div>
	        <br>
	        <!-- Modal footer -->
	        <div class="col-12 text-center">
	          <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="set_pay_title();">บันทึก</button>
	        </div>
	        <br>
	      </div>
	    </div>
	  </div>
	</div>

	<script>
		$('input:radio[name="pay-radio"]').change(
		    function () {
		      text_html = "<span><i class='fa fa-print'></i></span>";
		      if ($(this).is(':checked') && $(this).val() == "เงินโอน") {
		        $('textarea').prop('disabled', false);
		        $("#bill").prop("checked", true);
		      }else if ($(this).is(':checked') && $(this).val() == "ลูกหนี้") {
		        $('textarea').prop('disabled', false);
		        $("#bill").prop("checked", false);
		        $("#a4").prop("checked", true);
		      }else if ($(this).is(':checked') && $(this).val() == "เงินสด") {
		        $('textarea').prop('disabled', true);
		        $("#bill").prop("checked", true);
		        $('textarea').val("");
		      }
		});	
		
		$('#name').on('input', function() {
			var name = $('#name').val();           
			if(name == ""){
				$('#at').attr("placeholder","");
				$('#barcode').val("");
				$('#name').val("");
				$("#name").attr('data-img',"");
				$('#name[rel=popover]').popover({
					html: true, 
					trigger: 'hover',
					placement: 'left',
					content: function(){
					return '<img src='+$(this).data('img')+'>';}
				}); 		
				$('#fund').val("");
				$('#whole').val("");
				$('#retail').val("");
				$('#amount').val("1");
				$('#at').val("")
			}            
		});      
	</script>
</body>
</html>