<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="">
	<meta name="author" content="">

	<title>หมวดหมู่สินค้า</title>

	<!-- Bootstrap Import -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.6/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css" integrity="sha384-O8whS3fhG2OnA5Kas0Y9l3cfpmYjapjI0E4theH4iuMD+pLhbf6JI0jIMfYcK3yZ"
	 crossorigin="anonymous">

	<!-- Super cool dialog-->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.js"></script>

	<!-- Loading -->
	<link rel="stylesheet" href="css/easy-loading.css">
	<script src="js/easy-loading.js"></script>

	<!-- QRcode -->
	<script type="text/javascript" src="js/qrcode.min.js"></script>
	<script type="text/javascript" src="js/jQuery.print.js"></script>

	<!-- Font -->
	<link href="https://fonts.googleapis.com/css?family=Prompt" rel="stylesheet">
	<!-- Main -->
	<link href="css/untitled.css" rel="stylesheet">
	<link href="css/web_folder1.css" rel="stylesheet">

	<style>
		.i-trash{
  		float: right; margin-right: 10%; color: white;
  	}
  	.i-edit{
  		float: right; margin-right: 6%; color: white;
  	}
		.i-modal{
			float: right; margin-right: 6%; color: white; padding-top: 2px;
		}
		img{
			height: 200px;
			width: 200px;
		}	
  </style>

	<script>
		arr_prod = [];
	var num_prod = 0,from,p = 0,last_node = 0;
  	$(document).ready(function() {
		if(!localStorage.user_id){
			window.location = 'web_login.html';
		} 
		localStorage.stack_folder = "";
		url = new URL(window.location.href);		
		from = url.searchParams.get("from");
		$.ajax({
			type: "POST",
			url:"php/get_folder.php",
			crossDomain: true,
			data: {'parent' : "car"},  
			beforeSend: function(){
				EasyLoading.show({                           
						text: "กำลังโหลด"                            
					});			
			},             
			success: function(data){  
				EasyLoading.hide();			          
				var obj = jQuery.parseJSON(data);              
				if(obj.length > 0){				           
					$.each(obj, function(i, field){
						if(obj.length-1 > i){
							text_html = "<h3 class='brand' onclick='showsub(\""+obj[i].title+"\",1)'>"+obj[i].title+"</h3>";
							$("#col-brand").append(text_html);							
						}                                                 
					});               
				}                               
				                          
			}               
		});
		
  	});	

	function next(){
	  if(num_prod == 0){
		  return 0;
	  }
	  json = [];
      for(var i = 0 ; i < arr_prod.length ; i++){
        if(arr_prod[i].prod_id != 0){
            item = {}
            item["prod_id"] = arr_prod[i].prod_id;  
			item["name"] = arr_prod[i].name;  
			item["img"] = arr_prod[i].img;          
            json.push(item);               
        }
      }
      if(from == "import"){
          localStorage.setItem('arr_prod_i', JSON.stringify(json)); 
          window.location = "web_import.html";
        }else if(from == "export"){
          localStorage.setItem('arr_prod_e', JSON.stringify(json)); 
          window.location = "web_export.html";
        }else if(from == "sale"){
          localStorage.setItem('arr_prod_s', JSON.stringify(json)); 
          window.location = "web_sale.html";
        }else if(from == "stock"){
          localStorage.setItem('arr_prod_st', JSON.stringify(json)); 
          window.location = "web_stock.html";
        }else if(from == "qr"){
          localStorage.setItem('arr_prod_qr', JSON.stringify(json)); 
          window.location = "web_qrprint.html";
        }else if(from == "transfer"){
          localStorage.setItem('arr_prod_tr', JSON.stringify(json)); 
          window.location = "web_transfer_in.html";
        }          
	}

	var parent;
	function showsub(arg,arg2){
		parent = arg;
		console.log(arg);
		if(arg2){
			$(".prod-title").empty();
			localStorage.stack_folder = "";
			$('.prod-title').append('<span id="st"><i id="i-back" onclick="page_back();" class="fas fa-angle-left" hidden></i></span>&emsp;<i class="fas fa-trash" style="float: right; margin-right: 1.5%;" onclick="removeprod();"></i><i class="fas fa-pen" style="float: right; margin-right: 1.5%;" onclick="editprod();"></i><i id="i-prod-add" class="fas fa-plus-circle" style="float: right; margin-right: 1.5%;" onclick="addprod()"></i>');
		}
		if(localStorage.stack_folder){
			var retrievedObject = localStorage.getItem('stack_folder');
			var arr_data = JSON.parse(retrievedObject); 			
			$('#i-back').prop('hidden',false);
			if(arr_data.length == 0){
				var arr_data = [];    
				$('#i-back').prop('hidden',true); 
			} 
		}else{
			var arr_data = [];    
			$('#i-back').prop('hidden',true);   
		}
		arr_data.push(arg); 
		localStorage.setItem('stack_folder', JSON.stringify(arr_data));		
		$("#append-prod").empty();
		//$("#append-title").append('<h5 id="'+arg+'" onclick="page_back(\''+arg+'\')" class="prod-title">'+arg+'</h5>');
    	// ลองแก้เป็นแบบนี้ดู
		$('#st').append('<span id="'+arg+'" onclick="page_back(\''+arg+'\')">  '+arg+'  >></span><span>');		
		p = 0;
		$.ajax({
			type: "POST",
			url:"php/get_folder_web.php",
			crossDomain: true,
			data: {'parent' : arg},  
			beforeSend: function(){
				EasyLoading.show({                           
						text: "กำลังโหลด"                            
					});			
			},             
			success: function(data){  
				EasyLoading.hide();
				$('#col-prod').prop('hidden',false);    
				if(data != "last node"){
					var obj = jQuery.parseJSON(data);
					//console.log(obj)					         
					if(obj[obj.length-1] == "last node"){               
					$.each(obj, function(i, field){
						if(obj.length-1 > i){
							if(i % 2 == 0){
								text_html = '<h5 id="prod-'+p+'" class="prod-odd" rel="popover" data-img="'+obj[i][2].img+'" onclick="choose('+p+')"><span id="id-'+p+'" hidden>'+obj[i].title+'</span><input type="checkbox"><span id="span-code-'+p+'">'+obj[i][2].prod_code+'</span>&nbsp;&nbsp;&nbsp;&nbsp;<span id="span-name-'+p+'">'+obj[i][2].prod_name+'</span><i class="fas fa-trash i-trash" hidden></i><i class="fas fa-pen i-edit" hidden></i><i class="fas fa-info-circle i-modal" data-toggle="modal" data-target="#detailModal" onclick="hideclick('+p+');"></i></h5>';
							}else{
								text_html = '<h5 id="prod-'+p+'" class="prod-even" rel="popover" data-img="'+obj[i][2].img+'" onclick="choose('+p+')"><span  id="id-'+p+'" hidden>'+obj[i].title+'</span><input type="checkbox"><span id="span-code-'+p+'">'+obj[i][2].prod_code+'</span>&nbsp;&nbsp;&nbsp;&nbsp;<span id="span-name-'+p+'">'+obj[i][2].prod_name+'</span><i class="fas fa-trash i-trash" hidden></i><i class="fas fa-pen i-edit" hidden></i><i class="fas fa-info-circle i-modal" data-toggle="modal" data-target="#detailModal" onclick="hideclick('+p+');"></i></h5>';
							} 							 
							                  
						$("#append-prod").append(text_html + "<script>" +
							"$('#prod-"+p+"[rel=popover]').popover({" +
							"html: true," +
							"trigger: 'hover'," +
							"placement: 'left'," +
							"content: function(){" +
							"return '<img src='+$(this).data('img')+'>';}" +
							"});" +
						"</" + "script>");
						 p++                  
						}                                                 
					});  
					last_node = 1                                                              
					}else{					              
						$.each(obj, function(i, field){
							if(obj.length-1 > i){
								if(i % 2 == 0){
									text_html = '<h5 class="prod-odd list" onclick="showsub(\''+obj[i].title+'\')"><i class="fas fa-folder"></i>'+ obj[i].title +'<i class="fas fa-trash i-trash" hidden></i><i class="fas fa-pen i-edit" hidden></i></h5>';
								}else{
									text_html = '<h5 class="prod-even list" onclick="showsub(\''+obj[i].title+'\')"><i class="fas fa-folder"></i>'+ obj[i].title +'<i class="fas fa-trash i-trash" hidden></i><i class="fas fa-pen i-edit" hidden></i></h5>';
								}
								$("#append-prod").append(text_html);							
							}                                                 
						});  
						last_node = 0             
					}
				}else{				
					last_node = 2;
				}			          
								                          
			}               
		});
	}

	function choose(arg2){
		arg = $('#prod-'+arg2).find('input[type=checkbox]');
		name = $('#span-name-'+arg2).text();
		prod_id = $('#id-'+arg2).text();
		img = $('#prod-'+arg2).data('img');
		console.log(name)
		check = arg.prop('checked');	
		isenable = !arg.is(":disabled");
		if(check == false && isenable){
			arg.prop('checked', true);
			var ch = false;
			for(var i = 0 ; i < arr_prod.length ; i++){
				if(arr_prod[i].arg == arg2){
					arr_prod[i].prod_id = arg2;
					ch = true;
					break;
				}
			}
			if(!ch){          
				item = {};   
				item ["arg"] = arg2;        
				item ["prod_id"] = prod_id; 
				item ["name"] = name;   
				item ["img"] = img;        
				arr_prod.push(item);          
			}   
			num_prod++;				
			$('#btn-next').text("เลือกสินค้า("+num_prod+")");  
		}else if(isenable){
			arg.prop('checked', false);
			for(var i = 0 ; i < arr_prod.length ; i++){
				if(arr_prod[i].arg == arg2){
					arr_prod[i].prod_id = 0;
					break;
				}
			} 
			num_prod--;
			$('#btn-next').text("เลือกสินค้า("+num_prod+")");
		}
	}

	function page_back(arg){
		var retrievedObject = localStorage.getItem('stack_folder');
		var arr_data = JSON.parse(retrievedObject); 
		if(arg){
			for(var i = 1 ; i <= arr_data.length ; i++){
				var element = document.getElementById(arr_data[arr_data.length-i]);
				$(element).remove();
				// $('#'+arr_data[arr_data.length-i]).remove();				
				if(arr_data[arr_data.length-i] == arg){
					arr_data.splice(arr_data.length-i,i);
					break;
				}				
			}			
			localStorage.setItem('stack_folder', JSON.stringify(arr_data));  
			showsub(arg);
		}else{
			for(var i = 1 ; i <= 2 ; i++){	
				var element = document.getElementById(arr_data[arr_data.length-i]);
				$(element).remove();
				//$("span[id="+arr_data[arr_data.length-i]+"]").remove();
			}
			var data = arr_data[arr_data.length-2];		
			arr_data.splice(arr_data.length-2,2);
			localStorage.setItem('stack_folder', JSON.stringify(arr_data));  
			showsub(data);	
		}
			
	}   
	  
	/* Brand Zone */
  	function addbrandconfirm(){
  		brandname = $(".newbrand").val().toUpperCase();
  		if(brandname != ""){
			$.ajax({
				type: "POST",
				url: "php/add_folder.php",
				data: {
				'title': brandname,
				'parent': "car"
				},
				beforeSend: function(){
					EasyLoading.show({                           
						text: "กำลังโหลด"                            
					});	
				},             
				success: function(data){  
					EasyLoading.hide();
					if (data == "success") {
						$("#brand-tools").after('<h3 class="brand" onclick="showsub(\''+brandname+'\',1)">'+brandname+'</h3>');
						$(".newbrand").remove();
						$("#addbrandbtn").remove();
					} else {
						$.confirm({
						title: 'พบข้อผิดพลาด',
						content: 'ลองอีกครั้ง',
						backgroundDismiss: true,
						buttons: {
							formSubmit: {
							text: 'ตกลง',
							btnClass: 'btn-regis',
							action: function () {
							}
							}
						}
						});
					}
				}
			});  			
  		}else{
  			return 0;
  		}
  	}

  	function addbrandcancle(){
  		$(".newbrand").remove();
  		$("#addbrandbtn").remove();
  	}

  	function addbrand(){
  		//Clear
  			$(".brand").removeClass('delbrand');
  			$(".brand").removeClass('editbrand');
  			editbrandcancle();
  		//
  		if($(".newbrand").is(":visible")){
  			return 0;
  		}
  		$("#brand-tools").after('<input type="text" class="form-control text-center newbrand"><div id="addbrandbtn" class="row justify-content-center"><button class="btn btn-sm btn-success" style="margin-right: 10px; color: #fff" onclick="addbrandconfirm();">เพิ่ม</button><button class="btn btn-sm btn-danger" style="color: #fff" onclick="addbrandcancle();">ยกเลิก</button></div>');
  	}
	
  	function dialogbrandremove(arg){
  		$.confirm({
			icon: 'fa fa-warning',
			title: 'คุณต้องการลบ '+arg.text(),
			content: 'ต้องการลบรายการสินค้าออกจากรายการ!',
			buttons: {
				danger: {
					btnClass: 'btn-danger',
					text: 'ลบ',
					action: function () {
						$.ajax({
							type: "POST",
							url:"php/delete_folder.php",           
							data: {'title' : arg.text()},               
							beforeSend: function(){
								EasyLoading.show({                           
									text: "กำลังโหลด"                            
								});	
							},             
							success: function(data){  
								EasyLoading.hide();                           
								if(data == "success"){
									arg.remove();	
								}else{
									$.confirm({
										title: 'พบข้อผิดพลาด',
										content: 'ลองอีกครั้ง',
										backgroundDismiss: true,
										buttons: {
										formSubmit: {
											text: 'ตกลง',
											btnClass: 'btn-regis',
											action: function () {
											}
										}
										}
									});
								}                               
							}               
						});											
					}
				},
				ยกเลิก: function () {},
			}
		});
  	}

  	function removebrand(arg){
  		//Clear
  			$(".brand").removeClass('editbrand');
  			addbrandcancle();
  			editbrandcancle();
  		//
  		//alert(arg);
  		$("."+arg).attr('onclick', 'brandback("'+arg+'")');
  		$(".brand").addClass('delbrand');
  		$(".brand").attr('onclick', 'dialogbrandremove($(this))');
  	}

  	function brandback(arg){
  		if(arg == "fa-trash"){
  			$("."+arg).attr('onclick', 'removebrand("'+arg+'")');
  			$(".brand").removeClass('delbrand');
  			$(".brand").attr('onclick', 'showsub($(this).text(),1)');
  			$("#i-brand-add").attr('onclick', 'addbrand()');
  			$("#i-brand-edit").attr('onclick', 'editbrand("fa-pen")');
  		}else if(arg == "fa-pen"){
  			$("."+arg).attr('onclick', 'editbrand("'+arg+'")');
  			$(".brand").removeClass('editbrand');
  			$(".brand").attr('onclick', 'showsub($(this).text(),1)');
  			$("#i-brand-add").attr('onclick', 'addbrand()');
  			$("#i-brand-trash").attr('onclick', 'removebrand("fa-trash")');
  		}
  	}

  	function editbrandconfirm(arg){
		  brandname = $(".bluebrand").val().toUpperCase();
		  oldname = arg;
  		if(brandname != ""){
			$.ajax({
				type: "POST",
				url:"php/rename_folder.php",           
				data: {'old_name' : oldname,
					'name' : brandname},               
				beforeSend: function(){
					EasyLoading.show({                           
						text: "กำลังโหลด"                            
					});
				},             
				success: function(data){ 
					EasyLoading.hide();       
					if(data == "success"){					                    
						$(".invis").text(brandname);
						//alert($(".brand .invis").text());
						$(".bluebrand").remove();
						$("#editbrandbtn").remove();
						$(".brand").prop('hidden', false);
						$(".brand").removeClass('invis');
					}else{
						$.confirm({
							title: 'พบข้อผิดพลาด',
							content: 'ลองอีกครั้ง',
							backgroundDismiss: true,
							buttons: {
							formSubmit: {
								text: 'ตกลง',
								btnClass: 'btn-regis',
								action: function () {
								}
							}
							}
						});
					}             
					//$("#row-title-" + arg).prop('hidden', false);
					//$("#row-edit-" + arg).prop('hidden', true);          
				}               
			});  			
  		}else{
  			return 0;
  		}
  		$("#i-brand-edit").attr('onclick', 'brandback("fa-pen")');
  	}

  	function editbrandcancle(){
  		//arg.prop('hidden', false);
  		$(".bluebrand").remove();
  		$("#editbrandbtn").remove();
  		$(".brand").prop('hidden', false);
  		$(".brand").removeClass('invis');
  		$("#i-brand-edit").attr('onclick', 'brandback("fa-pen")');
  	}

  	function showbrandedit(arg){
  		$("#i-brand-edit").prop('onclick', '');
  		if($(".bluebrand").is(":visible")){
  			return 0;
  		}
  		arg.after('<input type="text" class="form-control text-center bluebrand" value="'+arg.text()+'"><div id="editbrandbtn" class="row justify-content-center"><button class="btn btn-sm btn-success" style="margin-right: 10px; color: #fff" onclick="editbrandconfirm(\''+arg.text()+'\');">ตกลง</button><button class="btn btn-sm btn-danger" style="color: #fff" onclick="editbrandcancle();">ยกเลิก</button></div>');
  		arg.addClass('invis');
  		arg.prop('hidden', true);
  	}

  	function editbrand(arg){
  		//Clear
  			$(".brand").removeClass('delbrand');
  			addbrandcancle();
  		//
  		$("."+arg).attr('onclick', 'brandback("'+arg+'")');
  		$(".brand").addClass('editbrand');
  		$(".brand").attr('onclick', 'showbrandedit($(this))');
  	}
  	
	/* Prod Zone */
  	function addF(arg){
		addprodcancle(arg);
		np++;
		$("#append-prod").prepend('<h5 id="newprod-'+np+'" class="prod-even">เพิ่ม : <input type="text" class="form-control" style="margin: 0; margin-top: 2px; margin-bottom: 10px; font-size: 1em; width: 70%;"><div class="row" style="padding-left: 2%;"><button class="btn btn-success" style="margin-right: 10px;" onclick="addprodconfirm('+np+',\'folder\');">เพิ่ม</button><button class="btn btn-danger" onclick="addprodcancle('+np+');">ยกเลิก</button></div></h5>');
	}
	  
	function addP(arg){
		addprodcancle(arg);
		np++;
		$("#append-prod").prepend('<h5 id="newprod-'+np+'" class="prod-even">เพิ่ม : <div class="row">'+
				'<input id="code-'+np+'" placeholder="รหัส" type="text" class="form-control" style="margin: 0; margin-top: 2px; margin-bottom: 10px; margin-right: 2px; font-size: 1em; width: 20%;">'+
				'<input id="name-'+np+'" placeholder="ชื่อสินค้า" type="text" class="form-control" style="margin: 0; margin-top: 2px; margin-bottom: 10px; margin-right: 2px; font-size: 1em; width: 25%;">'+
				'<input id="min-'+np+'" placeholder="จำนวนขั้นต่ำ" type="number" class="form-control" style="margin: 0; margin-top: 2px; margin-bottom: 10px; margin-right: 2px; font-size: 1em; width: 15%;">'+
				'</div><div class="row" style="padding-left: 2%;"><button class="btn btn-success" style="margin-right: 10px;" onclick="addprodconfirm('+np+',\'prod\');">เพิ่ม</button><button class="btn btn-danger" style="margin-right: 10px;" onclick="addprodcancle('+np+');">ยกเลิก</button>'+
					'<form id="imageUploadForm" method="post" enctype="multipart/form-data">'+
						'<input id="fileSelect" onchange="select_img()" type="file" name="file" accept="image/*" rel="popover" data-img="">'+
					'</form>'+	
				'</div></h5>');
	}

  	function addprodconfirm(arg,arg2){
		if(last_node == 0 || arg2 == 'folder'){
			newprod = $("#newprod-"+arg+" input[type='text']").val().toUpperCase();
			if(newprod == "") return 0;
			
			$.ajax({
				type: "POST",
				url: "php/add_folder.php",
				data: {
				'title': newprod,
				'parent': parent
				},
				beforeSend: function(){
					EasyLoading.show({                           
						text: "กำลังโหลด"                            
					});	
				},             
				success: function(data){  
					EasyLoading.hide();
					if (data == "success") {
						$("#newprod-"+arg).remove();
						text_html = '<h5 class="prod-odd list" onclick="showsub(\''+newprod+'\')"><i class="fas fa-folder"></i>'+ newprod +'<i class="fas fa-trash i-trash" hidden></i><i class="fas fa-pen i-edit" hidden></i></h5>';
						$("#append-prod").prepend(text_html);
						last_node = 0 
					} else {
						$.confirm({
						title: 'พบข้อผิดพลาด',
						content: 'ลองอีกครั้ง',
						backgroundDismiss: true,
						buttons: {
							formSubmit: {
							text: 'ตกลง',
							btnClass: 'btn-regis',
							action: function () {
							}
							}
						}
						});
					}
				}
			});  
		}else if(last_node == 1 || arg2 == 'prod'){
			code = $('#code-'+arg).val();
			name = $('#name-'+arg).val();
			min = $('#min-'+arg).val();
			if(code == "" || name == "" || min == "") return 0;
			var input = document.getElementById("fileSelect");
        	var file = input.files[0];
			var b64 = "";
			if (file != undefined) {
				var tempImg = new Image();
				tempImg.src = $("#fileSelect").data('img');
				tempImg.onload = function() {				

					var MAX_WIDTH = 960;
					var MAX_HEIGHT = 960;
					var width = tempImg.width;
					var height = tempImg.height;

					if (width > height) {
					if (width > MAX_WIDTH) {
						height *= MAX_WIDTH / width;
						width = MAX_WIDTH;
					}
					} else {
					if (height > MAX_HEIGHT) {
						width *= MAX_HEIGHT / height;
						height = MAX_HEIGHT;
					}
					}			

					// Create canvas of required size.
					var canvas = document.createElement('canvas');
					canvas.width = width;
					canvas.height = height;

					var ctx = canvas.getContext("2d");
					// Take image from top left corner to bottom right corner and draw the image
					// on canvas to completely fill into.
					ctx.drawImage(this, 0, 0, tempImg.width, tempImg.height, 0, 0, width, height);

					b64 = canvas.toDataURL("image/jpeg");				
					//console.log(b64)
				};			
			} 
			setTimeout(function() {
				$.ajax({
					type: "POST",
					url:"php/add_prod.php",           
					data: {'name_prod' : name,
						'code' : code,
						'parent' : parent,   
						'img' : b64,               
						'min' : min},               
					beforeSend: function(){
						EasyLoading.show({                           
							text: "กำลังโหลด"                            
						});	
					},             
					success: function(data){
						EasyLoading.hide();                      
						if(data != "fail"){
							console.log(data)
							$("#newprod-"+arg).remove();
							text_html = '<h5 id="prod-'+p+'" class="prod-odd"  rel="popover" data-img="'+b64+'" onclick="choose('+p+')"><span hidden id="id-'+p+'">'+data+'</span><input type="checkbox"><span id="span-code-'+p+'">'+code+'</span>&nbsp;&nbsp;&nbsp;&nbsp;<span id="span-name-'+p+'">'+name+'</span><i class="fas fa-trash i-trash" hidden></i><i class="fas fa-pen i-edit" hidden></i></h5>';	
							$("#append-prod").prepend(text_html + "<script>" +
								"$('#prod-"+p+"[rel=popover]').popover({" +
								"html: true," +
								"trigger: 'hover'," +
								"placement: 'left'," +
								"content: function(){" +
								"return '<img src='+$(this).data('img')+'>';}" +
								"});" +
							"</" + "script>");
							p++		
							last_node = 1
						}else{
							$.confirm({
							title: 'พบข้อผิดพลาด',
							content: 'ลองอีกครั้ง',
							backgroundDismiss: true,
							buttons: {
								formSubmit: {
								text: 'ตกลง',
								btnClass: 'btn-regis',
								action: function () {
								}
								}
							}
							});
						}
					}               
				});
			}, 1000);		
		}	
  	}

  	function addprodcancle(arg){
  		$("#newprod-"+arg).remove();
  		np--;
  	}
	  
	var np = 0;
  	function addprod(){
		if($("#newprod-"+np).is(":visible")){ return 0;} 
  		np++;  		
  		// find even or odd
  		prooreven = $(".prod-title").next().attr('class');
  		var cls;
  		if(prooreven == "prod-odd"){
  			cls = "prod-even";
  		}else{
  			cls = "prod-odd";
		}
		
		if(last_node == 0){
			$(".prod-title").after('<h5 id="newprod-'+np+'" class="'+cls+'">เพิ่มรายการ : <input type="text" class="form-control" style="margin: 0; margin-top: 2px; margin-bottom: 10px; font-size: 1em; width: 70%;"><div class="row" style="padding-left: 2%;"><button class="btn btn-success" style="margin-right: 10px;" onclick="addprodconfirm('+np+');">เพิ่ม</button><button class="btn btn-danger" onclick="addprodcancle('+np+');">ยกเลิก</button></div></h5>');
		}else if(last_node == 1){
			$(".prod-title").after('<h5 id="newprod-'+np+'" class="'+cls+'">เพิ่มสินค้า : <div class="row">'+
				'<input id="code-'+np+'" placeholder="รหัส" type="text" class="form-control" style="margin: 0; margin-top: 2px; margin-bottom: 10px; margin-right: 2px; font-size: 1em; width: 20%;">'+
				'<input id="name-'+np+'" placeholder="ชื่อสินค้า" type="text" class="form-control" style="margin: 0; margin-top: 2px; margin-bottom: 10px; margin-right: 2px; font-size: 1em; width: 25%;">'+
				'<input id="min-'+np+'" placeholder="จำนวนขั้นต่ำ" type="number" class="form-control" style="margin: 0; margin-top: 2px; margin-bottom: 10px; margin-right: 2px; font-size: 1em; width: 15%;">'+					
				'</div><div class="row" style="padding-left: 2%;"><button class="btn btn-success" style="margin-right: 10px;" onclick="addprodconfirm('+np+');">เพิ่ม</button><button class="btn btn-danger" style="margin-right: 10px;" onclick="addprodcancle('+np+');">ยกเลิก</button>'+
					'<form id="imageUploadForm" method="post" enctype="multipart/form-data">'+
						'<input id="fileSelect" onchange="select_img()" type="file" name="file" accept="image/*" rel="popover" data-img="">'+
					'</form>'+		
				'</div></h5>');
		}else if(last_node == 2){
			$(".prod-title").after('<h5 id="newprod-'+np+'" class="'+cls+'"><div class="row" style="padding-left: 2%;"><button class="btn btn-success" style="margin-right: 10px;" onclick="addF('+np+');">เพิ่มโฟลเดอร์</button><button class="btn btn-primary"  style="margin-right: 10px;" onclick="addP('+np+');">เพิ่มสินค้า</button><button class="btn btn-danger" onclick="addprodcancle('+np+');">ยกเลิก</button></div></h5>');
		}

  	}

  	function delspcfprod(arg){
		if(last_node == 0){
			$.confirm({
			icon: 'fa fa-warning',
				title: 'คุณต้องการลบ '+arg.text(),
				content: 'ต้องการลบออกจากรายการ!',
				buttons: {
					danger: {
						btnClass: 'btn-danger',
						text: 'ลบ',
						action: function () {	
							$.ajax({
								type: "POST",
								url:"php/delete_folder.php",           
								data: {'title' : arg.text()},               
								beforeSend: function(){
									EasyLoading.show({                           
										text: "กำลังโหลด"                            
									});	
								},             
								success: function(data){  
									EasyLoading.hide();                           
									if(data == "success"){
										arg.remove();
										if($("#append-prod").children().length == 0){
											last_node = 2;
										}     	
									}else{
										$.confirm({
											title: 'พบข้อผิดพลาด',
											content: 'ลองอีกครั้ง',
											backgroundDismiss: true,
											buttons: {
											formSubmit: {
												text: 'ตกลง',
												btnClass: 'btn-regis',
												action: function () {
												}
											}
											}
										});
									}                               
								}               
							});									
						}
					},
					ยกเลิก: function () {},
				}
			});
		}else if(last_node == 1){
			prod_id = $('#id-'+arg).text();
			prod = $("#span-name-"+arg).text();	
			$.confirm({
			icon: 'fa fa-warning',
				title: 'คุณต้องการลบ ' + prod,
				content: 'ต้องการลบรายการสินค้าออกจากรายการ!',
				buttons: {
					danger: {
						btnClass: 'btn-danger',
						text: 'ลบ',
						action: function () {	
							$.ajax({
								type: "POST",
								url:"php/delete_prod.php",           
								data: {'title' : prod_id},               
								beforeSend: function(){
									EasyLoading.show({                           
										text: "กำลังโหลด"                            
									});	
								},             
								success: function(data){  
									EasyLoading.hide();                          
									if(data == "success"){
										$('#prod-'+arg).remove()
										if($("#append-prod").children().length == 0){
											last_node = 2;
										} 
										p--; 								
									}else{
									$.confirm({
										title: 'พบข้อผิดพลาด',
										content: 'ลองอีกครั้ง',
										backgroundDismiss: true,
										buttons: {
										formSubmit: {
											text: 'ตกลง',
											btnClass: 'btn-regis',
											action: function () {
											}
										}
										}
									});
									}           
								}               
							});									
						}
					},
					ยกเลิก: function () {},
				}
			});
		}  		
  	}
		
  	function removeprod(){
  		if($(".i-trash").is(":visible")){
  			$(".i-trash").prop('hidden', true);
  			$("input[type='checkbox']").prop('disabled', false);
  			for(var j = 0; j < p; j++){
  			  	$("#prod-"+j).attr('onclick', 'choose('+j+')');
			  }
			  $(".list").attr('onclick', 'showsub($(this).text())');
  			return 0;
  		}
  		$("input[type='checkbox']").prop('disabled', true);
  		$(".i-trash").prop('hidden', false);
  		for(var i = 0; i < p; i++){
  			$("#prod-"+i).attr('onclick', 'delspcfprod('+i+')');
		  }
		  $(".list").attr('onclick', 'delspcfprod($(this))');
  	}

    function editspcfprod(arg){
  		if($("#editprod").is(":visible") || $(".edt").is(":visible")){
  			return 0;
  		} 
		  
		if(last_node == 0){
			arg.addClass('invis');
			// prod-id[1];
			text = arg.text();
			//arg.text('แก้ไขรายการ : ');
			//arg.append('<input type="checkbox" hidden>');
			arg.after('<h5 id="editprod" class="prod-even">แก้ไขรายการ : <input type="text" class="form-control" style="margin: 0; margin-top: 2px; margin-bottom: 10px; font-size: 1em; width: 70%;" value="'+text+'"><div class="row" style="padding-left: 2%;"><button class="btn btn-primary" style="margin-right: 10px;" onclick="editprodconfirm(\''+text+'\')">บันทึกแก้ไข</button><button class="btn btn-danger" onclick="editprodcancle(\''+text+'\');">ยกเลิก</button></div></h5>');
			arg.prop('hidden', true);
		}else if(last_node == 1){		
			name = $("#span-name-"+arg).text();			
			code = $("#span-code-"+arg).text();	
			namedq = name.replace(/"/g, '\\"');				
			$("#prod-"+arg).after('<h5 id="newprod-'+arg+'" class="prod-even edt">แก้ไขสินค้า : <div class="row">'+				
				'<input id="code-'+arg+'" placeholder="รหัสสินค้า" value="'+code+'" type="text" class="form-control" style="margin: 0; margin-top: 2px; margin-bottom: 10px; margin-right: 2px; font-size: 1em; width: 30%;">'+		
				"<input id='name-"+arg+"' placeholder='ชื่อสินค้า' value='"+name+"' type='text' class='form-control' style='margin: 0; margin-top: 2px; margin-bottom: 10px; margin-right: 2px; font-size: 1em; width: 50%;'>"+			
				"</div><div class='row' style='padding-left: 2%;'><button class='btn btn-primary' style='margin-right: 10px;' onclick='editprodconfirm(\""+namedq+"\",\""+code+"\","+arg+")'>บันทึกแก้ไข</button><button class='btn btn-danger' style='margin-right: 10px;' onclick='editprodcancle(\""+namedq+"\",\""+code+"\","+arg+");'>ยกเลิก</button>"+
					'<form id="imageUploadForm" method="post" enctype="multipart/form-data">'+
						'<input id="fileSelect" onchange="select_img()" type="file" name="file" accept="image/*" rel="popover" data-img="">'+
					'</form>'+	
				'</div></h5>');
			$("#prod-"+arg).prop('hidden', true);
		}		
  	}

  	function editprodconfirm(old_name,code,arg){
		if(last_node == 0){
			text = $("#editprod input").val().toUpperCase();
			$.ajax({
				type: "POST",
				url:"php/rename_folder.php",           
				data: {'old_name' : old_name,
					'name' : text},               
				beforeSend: function(){
					EasyLoading.show({                           
						text: "กำลังโหลด"                            
					});
				},             
				success: function(data){ 
					EasyLoading.hide();       
					if(data == "success"){					                    
						$("#editprod").remove();
						$(".invis").text(text);
						// $("#"+arg2).text(text);			
					
						$(".invis").prepend('<i class="fas fa-folder"></i>');
						
						$(".invis").append('<i class="fas fa-trash i-trash" hidden></i><i class="fas fa-pen i-edit"></i>');
						$(".invis").prop('hidden', false);
						$(".list").removeClass('invis');
					}else{
						$.confirm({
							title: 'พบข้อผิดพลาด',
							content: 'ลองอีกครั้ง',
							backgroundDismiss: true,
							buttons: {
							formSubmit: {
								text: 'ตกลง',
								btnClass: 'btn-regis',
								action: function () {
								}
							}
							}
						});
					}				    
				}               
			});		
		}else if(last_node == 1){
			name = $("#name-"+arg).val();
			barcode = $("#code-"+arg).val();
			prod_id = $('#id-'+arg).text();
			// from an input element
			var input = document.getElementById("fileSelect");
        	var file = input.files[0];	
			var b64;		
			if (file != undefined) {
				var tempImg = new Image();
				tempImg.src = $("#fileSelect").data('img');
				tempImg.onload = function() {				

					var MAX_WIDTH = 960;
					var MAX_HEIGHT = 960;
					var width = tempImg.width;
					var height = tempImg.height;

					if (width > height) {
					if (width > MAX_WIDTH) {
						height *= MAX_WIDTH / width;
						width = MAX_WIDTH;
					}
					} else {
					if (height > MAX_HEIGHT) {
						width *= MAX_HEIGHT / height;
						height = MAX_HEIGHT;
					}
					}			

					// Create canvas of required size.
					var canvas = document.createElement('canvas');
					canvas.width = width;
					canvas.height = height;

					var ctx = canvas.getContext("2d");
					// Take image from top left corner to bottom right corner and draw the image
					// on canvas to completely fill into.
					ctx.drawImage(this, 0, 0, tempImg.width, tempImg.height, 0, 0, width, height);

					b64 = canvas.toDataURL("image/jpeg");				
					//console.log(b64)
				};			
			}	
			setTimeout(function() {
				$.ajax({
					type: "POST",
					url:"php/rename_prod_web.php",           
					data: {'prod_id' : prod_id,
						'name_prod' : name,
						'code' : barcode,
						'img' : b64},               
					beforeSend: function(){
						EasyLoading.show({                           
							text: "กำลังโหลด"                            
						});
					},             
					success: function(data){
						EasyLoading.hide();					                          
						if(data == "success"){
							$("#newprod-"+arg).remove();
							$("#span-name-"+arg).text(name);
							$("#span-code-"+arg).text(barcode);
							if(b64){
								$('#prod-'+arg).data('img', b64);
							}							
							// $("#"+arg2).text(text);
							
							//$("#prod-"+arg).prepend('<input type="checkbox" disabled>');
						
							//$("#prod-"+arg).append('<i class="fas fa-trash i-trash" hidden></i><i class="fas fa-pen i-edit"></i>');
							$("#prod-"+arg).prop('hidden', false);						
						}else{
							$.confirm({
							title: 'พบข้อผิดพลาด',
							content: 'ลองอีกครั้ง',
							backgroundDismiss: true,
							buttons: {
								formSubmit: {
								text: 'ตกลง',
								btnClass: 'btn-regis',
								action: function () {
								}
								}
							}
							});
						}
					}               
				});
			}, 1000);		
			
		}		
  	}

  	function editprodcancle(old_name,code,arg){		  
		  if(last_node == 0){
			$("#editprod").remove();
			$(".invis").text(old_name);
			$(".invis").prepend('<i class="fas fa-folder"></i>');
			$(".invis").append('<i class="fas fa-trash i-trash" hidden></i><i class="fas fa-pen i-edit"></i>');
			$(".invis").prop('hidden', false);
			$(".list").removeClass('invis');
		  }else if(last_node == 1){
			$("#newprod-"+arg).remove();
			$("#span-name-"+arg).text(old_name);
			$("#span-code-"+arg).text(code);		
			//$("#prod-"+arg).prepend('<input type="checkbox" disabled>');		
			//$("#prod-"+arg).append('<i class="fas fa-trash i-trash" hidden></i><i class="fas fa-pen i-edit"></i>');
			$("#prod-"+arg).prop('hidden', false);
		  } 
  	}

  	function editprod(){
  		if($(".i-edit").is(":visible")){
  			$(".i-edit").prop('hidden', true);
  			$("input[type='checkbox']").prop('disabled', false);
  			for(var j = 0; j < p; j++){
  			  	$("#prod-"+j).attr('onclick', 'choose('+j+')');
			  }
			  $(".list").attr('onclick', 'showsub($(this).text())');
  			return 0;
  		}
  		$("input[type='checkbox']").prop('disabled', true);
  		$(".i-edit").prop('hidden', false);
  		for(var i = 0; i < p; i++){
  			$("#prod-"+i).attr('onclick', 'editspcfprod('+i+')');
		}
		$(".list").attr('onclick', 'editspcfprod($(this))');
  	}

	function readURL() {
		var input = document.getElementById("fileSelect");
      	if (input.files && input.files[0]) {
        var reader = new FileReader();
        reader.onload = function(e) {
          $('#fileSelect').data('img', e.target.result);
        }
        reader.readAsDataURL(input.files[0]);
      }
    }

	function select_img(){
		console.log("select")	
		readURL(); //set data-img of ch

		$('#fileSelect[rel=popover]').popover({
			html: true,
			trigger: 'hover',
			placement: 'right',
			content: function() {
			return '<img src=' + $(this).data('img') + '>';
			}
		});		  
	}

	var hide_func, hide_index;
	function hideclick(arg){
		hide_index = arg;
		hide_func = $("#prod-"+arg).attr("onclick");
		$("#prod-"+arg).attr("onclick", "");

		$('#ware').empty();
		$('#shop').empty();
		$.ajax({
			type: "GET",
			url:"php/get_ware_shop.php",                            
			beforeSend: function(){
				EasyLoading.show({                           
					text: "กำลังโหลด"                            
				});
			},             
			success: function(data){  
				EasyLoading.hide();
				var obj = jQuery.parseJSON(data); 
				if(obj){
					$.each(obj, function(i, field){							
						if(obj[i][2] == "โกดัง"){  						
							$('#ware').append('<a class="dropdown-item" href="#" onclick="setware('+field.ware_id+',\''+field.ware_name+'\','+arg+')">'+field.ware_name+'</a>');
						}else if(obj[i][2] == "หน้าร้าน"){ 						
							$('#shop').append('<a class="dropdown-item" href="#" onclick="setshop('+field.shop_id+',\''+field.shop_name+'\','+arg+')">'+field.shop_name+'</a>');
						}										
					}); 
				}
			}               
		}); 
	}

	var iw = 0;
	var is = 0;
	var ware_id;
	var shop_id;
	function setware(id,name,arg){
		$('#btn-ware').text(name);
		prod_id = $('#id-'+arg).text();
		ware_id = id;
		
		$('#addr-ware').empty();
		$('#input-addr-ware').empty();
		$.ajax({
			type: "POST",
			url:"php/get_place.php",
			data: {'prod_id':prod_id,'ware_id':id},                            
			beforeSend: function(){
				EasyLoading.show({                           
					text: "กำลังโหลด"                            
				});
			},             
			success: function(data){  
				EasyLoading.hide();
				var obj = jQuery.parseJSON(data); 
				if(obj.length > 0){
					$.each(obj, function(i, field){							
						$('#addr-ware').append('<div id="ware-shop-'+i+'" class="col-4 text-center">'+field.place+'</div>');
						$('#input-addr-ware').append('<div id="ware-'+i+'" class="col-4 input-group-append align-items-end">'+
							'<input id="input-ware-'+i+'" type="text" class="form-control form-control-sm" style="margin-right: 2px;">'+
							'<button onclick="removeplace('+i+','+prod_id+','+id+',\'ware\')" type="button" class="btn btn-sm btn-danger" style="height: 40%; margin-bottom: 8%;"><i class="fas fa-times-circle"></i></button>'+
						'</div>');
					iw = i+1;
					}); 
				}
			}               
		}); 
	}

	function setshop(id,name,arg){
		$('#btn-shop').text(name);
		prod_id = $('#id-'+arg).text();	
		shop_id = id;	

		$('#addr-shop').empty();
		$('#input-addr-shop').empty();
		$.ajax({
			type: "POST",
			url:"php/get_place.php",
			data: {'prod_id':prod_id,'shop_id':id},                            
			beforeSend: function(){
				EasyLoading.show({                           
					text: "กำลังโหลด"                            
				});
			},             
			success: function(data){  
				EasyLoading.hide();
				var obj = jQuery.parseJSON(data); 
				if(obj.length > 0){
					$.each(obj, function(i, field){							
						$('#addr-shop').append('<div id="name-shop-'+i+'" class="col-4 text-center">'+field.place+'</div>');
						$('#input-addr-shop').append('<div id="shop-'+i+'" class="col-4 input-group-append align-items-end">'+
							'<input id="input-shop-'+i+'" type="text" class="form-control form-control-sm" style="margin-right: 2px;">'+
							'<button onclick="removeplace('+i+','+prod_id+','+id+',\'shop\')" type="button" class="btn btn-sm btn-danger" style="height: 40%; margin-bottom: 8%;"><i class="fas fa-times-circle"></i></button>'+
						'</div>');
					is = i+1;							
					}); 
				}
			}               
		}); 
	}

	function removeplace(index,prod_id,id,type){
		if(type == "ware"){
			datastr = {'prod_id':prod_id,'ware_id':id};
		}else if(type == "shop"){
			datastr = {'prod_id':prod_id,'shop_id':id};
		}
		
		$.confirm({
		icon: 'fa fa-warning',
			title: 'ลบ',
			content: 'ต้องการลบออกจากรายการใช่หรือไม่!',
			buttons: {
				danger: {
					btnClass: 'btn-danger',
					text: 'ลบ',
					action: function () {	
						$.ajax({
							type: "POST",
							url:"php/delete_place.php",           
							data: datastr,               
							beforeSend: function(){
								EasyLoading.show({                           
									text: "กำลังโหลด"                            
								});	
							},             
							success: function(data){  
								EasyLoading.hide();                           
								if(data == "success"){
									if(type == "ware"){
										$("#name-ware-"+index).remove();
										$("#ware-"+index).remove();		
									}else if(type == "shop"){
										$("#name-shop-"+index).remove();
										$("#shop-"+index).remove();			
									}														
								}else{
									$.confirm({
										title: 'พบข้อผิดพลาด',
										content: 'ลองอีกครั้ง',
										backgroundDismiss: true,
										buttons: {
										formSubmit: {
											text: 'ตกลง',
											btnClass: 'btn-regis',
											action: function () {
											}
										}
										}
									});
								}                               
							}               
						});									
					}
				},
				ยกเลิก: function () {},
			}
		});
	}

	function showclick(){
		$("#prod-"+hide_index).attr("onclick", hide_func);
		hide_func = "";

		arr = [];
		for(var i = 0 ; i < iw ; i++){
			addr_ware = $('#input-ware-'+i).val()
			if(addr_ware != ""){
				item = {};                 
				item ["prod_id"] = $('#id-'+hide_index).text();                  
				item ["id"] =  ware_id;       
				item ["addr"] =  addr_ware;    
				item ["type"] =  "ware";      

				arr.push(item); 
			}			
		}
		for(var j = 0 ; j < is ; j++){
			addr_shop = $('#input-shop-'+j).val()
			if(addr_shop != ""){
				item = {};                 
				item ["prod_id"] = $('#id-'+hide_index).text();                  
				item ["id"] =  shop_id;       
				item ["addr"] =  addr_shop;    
				item ["type"] =  "shop";      

				arr.push(item); 
			}			
		}
		jsonstr = JSON.stringify(arr);
		$.ajax({
			type: "POST",
			url:"php/rename_place.php",           
			data: {'JSON' : jsonstr},               
			beforeSend: function(){
				EasyLoading.show({                           
					text: "กำลังโหลด"                            
				});
			},             
			success: function(data){ 
				EasyLoading.hide();       
				if(data == "success"){					                    
				
				}else{
					$.confirm({
						title: 'พบข้อผิดพลาด',
						content: 'ลองอีกครั้ง',
						backgroundDismiss: true,
						buttons: {
						formSubmit: {
							text: 'ตกลง',
							btnClass: 'btn-regis',
							action: function () {
							}
						}
						}
					});
				}  
			}               
		});  

		$('#btn-ware').text("เลือกโกดัง");
		$('#btn-shop').text("เลือกหน้าร้าน");
		$('#addr-ware').empty();
		$('#input-addr-ware').empty();
		$('#addr-shop').empty();
		$('#input-addr-shop').empty();
		iw = 0;
		is = 0;
	}

	$(document).on("hidden.bs.modal", '#detailModal', function() {	
		$("#prod-"+hide_index).attr("onclick", hide_func);
		hide_func = "";

		$('#btn-ware').text("เลือกโกดัง");
		$('#btn-shop').text("เลือกหน้าร้าน");
		$('#addr-ware').empty();
		$('#input-addr-ware').empty();
		$('#addr-shop').empty();
		$('#input-addr-shop').empty();
		iw = 0;
		is = 0;
	});

  </script>
</head>

<body style="overflow:hidden">
	<div class="container-fullwidth justify-content-center h-100">
		<div class="row" style="padding-left: 1.5%; padding-right: 1.5%; margin-top: 3%; margin-bottom: 15px; height: 85%;">
			<div id="col-brand" class="col-md-3 text-center" style="overflow-y: auto">
				<h3 id="title-lft" class="folder-title">หมวดหมู่สินค้า</h3>
				<div id="brand-tools" class="row justify-content-center" style="margin-top: -5%;">
					<div id="brand-add" class="col-2">
						<h4><i id="i-brand-add" class="fas fa-plus-circle" onclick="addbrand();"></i></h4>
					</div>
					<div id="brand-edit" class="col-2">
						<h4><i id="i-brand-edit" class="fas fa-pen" onclick="editbrand('fa-pen');"></i></h4>
					</div>
					<div id="brand-remove" class="col-2">
						<h4><i id="i-brand-trash" class="fas fa-trash" onclick="removebrand('fa-trash');"></i></h4>
					</div>
				</div>

			</div>
			<div id="col-prod" class="col-md-9"  style="overflow-y: auto" hidden>
				<h5 class="prod-title">
					<!-- <i id="i-back" onclick="page_back();" class="fas fa-angle-left"></i> ชื่อสินค้า <span> < ชื่อสินค้า 2</span> <span> < ชื่อสินค้า 3</span><i id="i-prod-add" class="fas fa-plus-circle" style="margin-left: 75%; margin-right: 1.5%;" onclick="addprod()"></i><i class="fas fa-trash" style="margin-right: 1.5%;" onclick="removeprod();"></i><i class="fas fa-pen" onclick="editprod();"></i> -->
				</h5>
				<div id="append-prod">
					<!--<h5 id="prod-1" class="prod-odd" rel="popover" data-img="'+obj[i][2].img+'" onclick="choose(1);"><span id="id-'+p+'"
						 hidden>'+obj[i].title+'</span><input type="checkbox"><span id="span-code-'+p+'">'+obj[i][2].prod_code+'</span>&nbsp;&nbsp;&nbsp;&nbsp;<span
						 id="span-name-'+p+'">'+obj[i][2].prod_name+'</span><i class="fas fa-trash i-trash" hidden></i><i class="fas fa-pen i-edit"
						 hidden></i><i class="fas fa-info-circle i-modal" data-toggle="modal" data-target="#detailModal" onclick="hideclick(1);"></i></h5>-->
					<!-- append prod or folder -->
				</div>
			</div>
		</div>
		<div class="row justify-content-end">
			<div class="col-2 text-center">
				<button id="btn-next" class="btn btn-success" onclick="next()">เลือกสินค้า(0)</button>
			</div>
		</div>
	</div>

	<!-- Detail Modal -->
	<div class="modal fade" id="detailModal" tabindex='-1'>
		<div class="modal-dialog modal-md modal-dialog-centered">
			<div class="modal-content">
				<!-- Modal Header -->
				<div class="col-12 text-center" style="margin-top: 15px;">
					<h4 class="modal-title">ที่อยู่สินค้า</h4>
					<hr style="width: 70%;">
				</div>

				<!-- Shop body -->
				<div class="modal-body">
					<div class="row justify-content-center r">					
						<div class="dropdown">
							<button class="btn btn-outline-dark dropdown-toggle" type="button" id="btn-ware" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							  เลือกโกดัง
							</button>
							<div id="ware" class="dropdown-menu" aria-labelledby="btn-ware">
							
							</div>
						  </div>
					</div><hr style="margin-top: 0px; width: 25%;">
					<div class="row" id="addr-ware">
					
					</div>
					<div class="row" id="input-addr-ware">
					
					</div>

					<hr style="width: 95%;">

					<div class="row justify-content-center">
						<div class="dropdown">
							<button class="btn btn-outline-dark dropdown-toggle" type="button" id="btn-shop" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							  เลือกหน้าร้าน
							</button>
							<div id="shop" class="dropdown-menu" aria-labelledby="btn-shop">
							
							</div>
						  </div>
					</div><hr style="margin-top: 0px; width: 25%;">
					<div class="row" id="addr-shop">
						<!-- <div class="col-4 text-center">ชื่อ 1</div>
						<div class="col-4 text-center">ชื่อ 2</div>
						<div class="col-4 text-center">-</div> -->
					</div>
					<div class="row" id="input-addr-shop">
						<!-- <div class="col-4 input-group-append align-items-end">
							<input type="text" class="form-control form-control-sm" style="margin-right: 2px;">
							<button type="button" class="btn btn-sm btn-danger" style="height: 40%; margin-bottom: 8%;"><i class="fas fa-times-circle"></i></button>
						</div>
						<div class="col-4 input-group-append align-items-end">
							<input type="text" class="form-control form-control-sm" style="margin-right: 2px;">
							<button type="button" class="btn btn-sm btn-danger" style="height: 40%; margin-bottom: 8%;"><i class="fas fa-times-circle"></i></button>
						</div>
						<div class="col-4 input-group-append align-items-end">
							<input type="text" class="form-control form-control-sm" style="margin-right: 2px;">
							<button type="button" class="btn btn-sm btn-danger" style="height: 40%; margin-bottom: 8%;"><i class="fas fa-times-circle"></i></button>
						</div> -->
					</div>
					<br>
					<!-- Modal footer -->
					<div class="col-12 text-center">
						<button type="button" class="btn btn-primary" data-dismiss="modal" onclick="showclick();" style="width: 150px;;">บันทึก</button>
					</div>
					<br>
				</div>
			</div>
		</div>
	</div>

</body>

</html>