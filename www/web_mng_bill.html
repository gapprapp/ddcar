<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>รายงานบิล</title>

    <!-- Bootstrap Import -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.6/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css" integrity="sha384-O8whS3fhG2OnA5Kas0Y9l3cfpmYjapjI0E4theH4iuMD+pLhbf6JI0jIMfYcK3yZ"
        crossorigin="anonymous">

    <!-- Super cool dialog-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.js"></script>

    <!-- Loading -->
    <link rel="stylesheet" href="css/easy-loading.css">
    <script src="js/easy-loading.js"></script>

    <!-- Font -->
    <link href="https://fonts.googleapis.com/css?family=Prompt" rel="stylesheet">
    <!-- Main -->
    <link href="css/untitled.css" rel="stylesheet">
    <style>
    body{color: #666;}
    a{ color: #999;}
    a:hover{color: #666;}
    .active{color: #666;}
    .bill-odd, .bill-even{
      padding-top: 1%; padding-bottom: 1%; color: #fff; margin-bottom: 1%; cursor: pointer;
    }
    .bill-odd{
      background-color: #999;
    }
    .bill-even{
      background-color: #858585;
    }
    h5{
      letter-spacing: 2px;
    }
    ul {
      list-style-type: none;
      margin: 0;
      padding: 0;
    }
    div[id^="detail"]{
        margin-bottom: 0.8em;
    }
    .items{
        font-size: 120%;
    }
    div[id^="item-"]{
        margin-top: 0.5em;
    }
  </style>

  <script>

    var last_collapse_index = 0;

    function appendCollapse(index){
      if($("#detail-"+index).length){
        if(last_collapse_index){
          $("div").closest("#detail-"+last_collapse_index).collapse('hide');
        }

        $("#btn-a4").attr('onclick', 'printA4('+index+")");
        $("#btn-recep").attr('onclick', 'printRecep('+index+")");

        if(last_collapse_index != index){
          last_collapse_index = index;
        }
      }else{

        if(last_collapse_index){
          $("div").closest("#detail-"+last_collapse_index).collapse('hide');
        }

        var text = '<div class="collapse" id="detail-'+index+'">'+
          '<div class="card card-body">'+
            '<div class="row justify-content-center">'+
                '<h3 style="text-decoration: underline;">รายการ</h3>'+
            '</div>'+
            '<div id="item-1" class="row justify-content-center">'+
                '<div class="col-1 text-center items">500</div>'+
                '<div class="col-7 text-center items">กันรอยขอบกระบะท้าย revo logo ROCCO</div>'+
                '<div class="col-2 text-center items">120,000</div>'+
                '<div class="col-2 text-center items">600,000</div>'+
            '</div>'+
            '<div id="item-2" class="row justify-content-center">'+
                '<div class="col-1 text-center items">500</div>'+
                '<div class="col-7 text-center items">กันรอยขอบกระบะท้าย revo logo ROCCO</div>'+
                '<div class="col-2 text-center items">120,000</div>'+
                '<div class="col-2 text-center items">600,000</div>'+
            '</div>'+
            '<div id="item-3" class="row justify-content-center">'+
                '<div class="col-1 text-center items">500</div>'+
                '<div class="col-7 text-center items">กันรอยขอบกระบะท้าย revo logo ROCCO</div>'+
                '<div class="col-2 text-center items">120,000</div>'+
                '<div class="col-2 text-center items">600,000</div>'+
            '</div>'+
            '<hr style="width: 50%; margin: auto; margin-top: 1em;">'+
            '<div class="row" style="margin-top: 1em;">'+
                '<div class="col-4 text-right"><h4>รวม</h4></div>'+
                '<div class="col-4 text-right"><h4>100,000</h4></div>'+
            '</div>'+
            '<div class="row">'+
                '<div class="col-4 text-right"><h4>ลด</h4></div>'+
                '<div class="col-4 text-right"><h4>10,000</h4></div>'+
            '</div>'+
            '<div class="row">'+
                '<div class="col-4 text-right"><h4>รับ / ทอน</h4></div>'+
                '<div class="col-4 text-right"><h4>120,000</h4></div>'+
                '<div class="col-4 text-center"><h4>1,000</h4></div>'+
            '</div>'+
            '<div class="row justify-content-center" style="margin-top: 1em;">'+
                '<div class="col-4 text-center">'+
                '<button class="btn btn-lg btn-warning" data-toggle="modal" data-target="#printModal" style="color: white;">พิมพ์รายการ  <i class="fas fa-print"></i></button>'+
                '</div>'+
            '</div>'+
          '</div>'+
        '</div>';

        $("#bill-"+index).append(text);

        $("#btn-a4").attr('onclick', 'printA4('+index+")");
        $("#btn-recep").attr('onclick', 'printRecep('+index+")");

        if(last_collapse_index != index){
          last_collapse_index = index;
        }
      }
      $('html, body').animate({
            scrollTop: $("#bill-"+index).offset().top
        }, 1100);
    }

    function printA4(index){
      alert("Print A4 @ index = " + index);
    }

    function printRecep(index){
      alert("Print Recep @ index = " + index); 
    }
  </script>
</head>

<body>
    <div class="container-fullwidth justify-content-center">
        <nav class="navbar navbar-expand-md navbar-dark">
            <div class="collapse navbar-collapse justify-content-md-center" id="navbarCollapse">
                <h3 id="nav-title">รายงานบิล</h3>
            </div>
        </nav>
        <div class="container">
            <div class="row" style="margin-top: 2px;">
                <div class="col-12 text-center">
                    <a href="web_sale.html" class="mgr-20">ขายสินค้า</a>
                    <a href="web_import.html" class="mgr-20">นำสินค้าเข้า</a>
                    <a href="web_stock.html" class="mgr-20">เช็คสต๊อก</a>
                    <a href="web_export.html" class="mgr-20">สินค้าออกโกดัง</a>                   
                    <a href="web_select.html" class="mgr-20 active">รายการย้อนหลัง</a>
                    <a href="web_qrprint.html" class="mgr-20">พิมพ์คิวอาร์</a>
                    <a href="" class="mgr-20" onclick="logout()">ออกจากระบบ</a>
                </div>
            </div>
        </div><br><br>
        <div class="container-fullwidth">
            <div class="input-group row justify-content-center" style="margin-bottom: 4%; margin-left: 0.5%">
                <input id="input-search" onkeyup="search();" type="text" class="form-control-lg text-center"
                    placeholder="ค้นหา เลขที่บิล / ลูกค้า" style="width: 60%;">
            </div>
        </div>
        <div class="container-fullwidth">
            <div class="row justify-content-center">
                <div class="col-4 text-center">
                    <h4>เลขที่บิล</h4>
                </div>
                <div class="col-3 text-center">
                    <h4>วันที่</h4>
                </div>
                <div class="col-4 text-center">
                    <h4>ชื่อลูกค้า</h4>
                </div>
            </div>
        </div>
        <hr style="width: 75%; margin-top: 0;"> <br>
        <div id="ctn-append" class="container-fullwidth">
            <ul id="myUL">
                <li id="bill-1">
                    <div class="row justify-content-center bill-odd" data-toggle="collapse" href="#detail-1" role="button" aria-expanded="false" aria-controls="detail-1" onclick="appendCollapse(1);">
                        <div class="col-4 text-center"><h5>S18-00329</h5></div>
                        <div class="col-3 text-center"><h5>03/10/18</h5></div>
                        <div class="col-4 text-center"><h5>Phoenix</h5></div>
                    </div>
                </li>
                <li id="bill-2">
                    <div class="row justify-content-center bill-even" data-toggle="collapse" href="#detail-2" role="button" aria-expanded="false" aria-controls="detail-2" onclick="appendCollapse(2);">
                        <div class="col-4 text-center"><h5>S18-00329</h5></div>
                        <div class="col-3 text-center"><h5>03/10/18</h5></div>
                        <div class="col-4 text-center"><h5>Phoenix</h5></div>
                    </div>
                </li>
                <li id="bill-3">
                    <div class="row justify-content-center bill-even" data-toggle="collapse" href="#detail-3" role="button" aria-expanded="false" aria-controls="detail-3" onclick="appendCollapse(3);">
                        <div class="col-4 text-center"><h5>S18-00329</h5></div>
                        <div class="col-3 text-center"><h5>03/10/18</h5></div>
                        <div class="col-4 text-center"><h5>Phoenix</h5></div>
                    </div>
                </li>
                <li id="bill-4">
                    <div class="row justify-content-center bill-even" data-toggle="collapse" href="#detail-4" role="button" aria-expanded="false" aria-controls="detail-4" onclick="appendCollapse(4);">
                        <div class="col-4 text-center"><h5>S18-00329</h5></div>
                        <div class="col-3 text-center"><h5>03/10/18</h5></div>
                        <div class="col-4 text-center"><h5>Phoenix</h5></div>
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="printModal" tabindex="-1" role="dialog" aria-labelledby="printModal" aria-hidden="true" style="margin-top: 25%;">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="printModal">เลือกรูปแบบการพิมพ์</h5>
          </div>
          <div class="modal-footer justify-content-end">
            <button id="btn-a4" type="button" class="btn btn-warning">ใบวางบิล <i class="fas fa-file-invoice"></i> </button>
            <button id="btn-recep" type="button" class="btn btn-primary">ใบเสร็จ <i class="fas fa-receipt"></i> </button>
            <button style="margin-left: 30px;" type="button" class="btn btn-danger" data-dismiss="modal" aria-label="Close">ปิด <i class="fas fa-times"></i> </button>
          </div>
        </div>
      </div>
    </div>
</body>
</html>